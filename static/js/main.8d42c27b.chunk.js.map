{"version":3,"sources":["img/colorSquare.png","Components/ClrCanvas.js","Components/Square.js","Components/PMappingUI.js","pages/Personalization.js","pages/Workspace.js","App.js","hooks/customeHooks.js","index.js"],"names":["ClrCanvas","updateHoverClr","updateSelectedClr","canvasRef","useRef","imgRef","getMouseClr","e","canvas","current","canvasRect","getBoundingClientRect","x","clientX","left","y","clientY","top","pixel","getContext","getImageData","data","id","ref","onMouseMove","curClr","onClick","alt","src","colorSquare","onLoad","ctx","img","width","clientWidth","height","clientHeight","console","log","drawImage","style","display","Square","clr","baseWidth","maxWidth","size","removeSquare","updateSize","squareRef","wrapperRef","useState","interfaceDisplay","setInterfaceDisplay","mouseDownForResize","setMouseDown","wrapperStyle","position","marginBottom","squareStyle","backgroundColor","border","closeStyle","cursor","dragStyle","transform","opacity","showInterface","hideInterface","mouseMoveHandler","useCallback","wrapperLeft","minWidth","parseInt","slice","newSize","mouseUpHandler","window","removeEventListener","useEffect","addEventListener","onMouseEnter","onMouseLeave","onMouseDown","vxmlns","viewBox","fill","d","PMappingUI","pieceQueue","finishPers","hoverClr","selectedClr","resetColors","curPieceId","setCurPieceId","piecePath","setPiecePath","forceRerender","storedMappings","setMappings","mapping","setMapping","warnDisplay","setWarnDisplay","squaresDivRef","removeMapping","length","resetUI","storeMappings","curMapping","mappings","num","autoPlay","controls","color","Object","keys","map","i","offsetWidth","Personalization","onPageSwitch","setHoverClr","setSelectedClr","updateHoverColor","updateSelectedColor","mappingUIProps","nextPage","className","Workspace","App","curPage","setCurPage","setNextPage","useReducer","visible","isAnimated","toggleAnimated","startPageSwitch","pageSwitchData","AnimationProps","in","timeout","pageProps","classNames","onEntered","renderSwitch","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8d42c27b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/colorSquare.68d8802c.png\";","import { useRef } from 'react';\nimport './ClrCanvas.css';\nimport colorSquare from '../img/colorSquare.png';\n\nfunction ClrCanvas({updateHoverClr, updateSelectedClr}) {\n    const canvasRef = useRef(null);\n    const imgRef = useRef(null);\n\n    function handleImgOnload (){\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      const img = imgRef.current;\n      img.width = canvas.clientWidth;\n      img.height = canvas.clientHeight;\n      console.log(\"image onload\");\n      ctx.canvas.width = img.width;\n      ctx.canvas.height = img.height;\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      img.style.display = 'none';\n    }\n\n    function getMouseClr(e){\n        const canvas = canvasRef.current;\n        let canvasRect = canvas.getBoundingClientRect();\n        let x = e.clientX - canvasRect.left;\n        let y = e.clientY - canvasRect.top;\n        const ctx = canvas.getContext(\"2d\");\n        let pixel = ctx.getImageData(x,y,1,1).data;\n        let curClr = 'rgba(' + pixel[0] + ', ' + pixel[1] + ', ' + pixel[2] + ', ' + pixel[3] / 255 + ')';\n        return curClr;\n    }\n\n    return(\n        <div id='colorPicker'>\n          <canvas id=\"canvas\" ref={canvasRef} \n            onMouseMove={e => {\n                let curClr = getMouseClr(e);\n                updateHoverClr(curClr);\n            }}\n            onClick={e=>{\n                let curClr = getMouseClr(e);\n                updateSelectedClr(curClr);\n            }\n            }/>\n          <img id=\"colorSquare\" ref={imgRef} alt='pick color' \n          src={colorSquare}\n          onLoad={handleImgOnload} />\n        </div>\n      )\n  }\n  \n  export default ClrCanvas","import React, {useState, useRef, useCallback, useEffect} from 'react';\n\nfunction Square({id, clr, baseWidth, maxWidth, size, removeSquare, updateSize}) {\n    const squareRef = useRef();\n    const wrapperRef = useRef();\n    const [interfaceDisplay, setInterfaceDisplay] = useState(false);\n    const [mouseDownForResize, setMouseDown] = useState(false);\n\n    let wrapperStyle = {\n        position: \"relative\",\n        width: size,\n        height: \"30%\",\n        marginBottom: \"2px\"\n    }\n    let squareStyle = {\n        display: \"block\",\n        backgroundColor: clr,\n        width: \"100%\",\n        height: \"100%\",\n        border: \"0.5px solid black\"\n    }\n    let closeStyle = {\n        display: interfaceDisplay?\"initial\":\"none\",\n        cursor: \"pointer\",\n        height: \"28%\",\n        position: \"absolute\",\n        top: \"4px\",\n        left: \"4px\"\n    }\n    let dragStyle={\n        display: interfaceDisplay?\"initial\":\"none\",\n        height: \"55%\",\n        position: \"absolute\",\n        left: \"100%\",\n        top: \"50%\",\n        transform: \"translate(-60%, -50%)\",\n        opacity: \"50%\",\n        cursor:\"col-resize\"\n    }\n\n    function deleteMe(){\n        removeSquare(id);\n    }\n    function showInterface(){\n        setInterfaceDisplay(true)\n    }\n    function hideInterface(){\n        setInterfaceDisplay(false)\n    }\n    const mouseMoveHandler = useCallback(e=>{\n        let wrapperRect = wrapperRef.current.getBoundingClientRect();\n        let wrapperLeft = wrapperRect.left;\n        let minWidth = maxWidth * parseInt(baseWidth.slice(0, -1)) / 100\n        let mouseLeft = e.clientX;\n        let newSize = mouseLeft - wrapperLeft;\n        if (newSize < minWidth || newSize > maxWidth){\n            return\n        }\n        updateSize(id, newSize);\n    }, [baseWidth, id, maxWidth, updateSize])\n\n    const mouseUpHandler = useCallback(e=>{\n        console.log(\"mouse up, removed event listeners\")\n        setMouseDown(false);\n        window.removeEventListener('mouseup', mouseUpHandler)\n        window.removeEventListener('mousemove', mouseMoveHandler)\n    }, [setMouseDown, mouseMoveHandler])\n\n    useEffect(()=>{\n        if (mouseDownForResize){\n            console.log(\"mouse down, added event listeners\")\n            window.addEventListener('mouseup', mouseUpHandler)\n            window.addEventListener('mousemove', mouseMoveHandler)\n        }\n    }, [mouseDownForResize, mouseMoveHandler, mouseUpHandler])\n    \n    \n    return(\n        <div id='square-wrapper' style={wrapperStyle} ref={wrapperRef}>\n            <div ref={squareRef} style={squareStyle} \n                onMouseEnter={showInterface} onMouseLeave={hideInterface}>\n            </div>\n            <svg id='drag' style={dragStyle}\n                onMouseEnter={showInterface} onMouseLeave={hideInterface}\n                onMouseDown={()=> {\n                    console.log(\"mouse down for resizing\")\n                    setMouseDown(true)\n                }} \n                vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 42 42\">\n                <g fill='black'>\n                    <path d=\"M15.5,0c-0.552,0-1,0.447-1,1v40c0,0.553,0.448,1,1,1s1-0.447,1-1V1C16.5,0.447,16.052,0,15.5,0z\"/>\n                    <path d=\"M20.5,0c-0.552,0-1,0.447-1,1v40c0,0.553,0.448,1,1,1s1-0.447,1-1V1C21.5,0.447,21.052,0,20.5,0z\"/>\n                </g>\n            </svg>\n            <svg id='close-icon' style={closeStyle} \n                onClick={deleteMe} onMouseEnter={showInterface} onMouseLeave={hideInterface} \n                vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 475.2 475.2\">\n                <g fill='black'>\n                    <path d=\"M405.6,69.6C360.7,24.7,301.1,0,237.6,0s-123.1,24.7-168,69.6S0,174.1,0,237.6s24.7,123.1,69.6,168s104.5,69.6,168,69.6\n                    s123.1-24.7,168-69.6s69.6-104.5,69.6-168S450.5,114.5,405.6,69.6z M386.5,386.5c-39.8,39.8-92.7,61.7-148.9,61.7\n                    s-109.1-21.9-148.9-61.7c-82.1-82.1-82.1-215.7,0-297.8C128.5,48.9,181.4,27,237.6,27s109.1,21.9,148.9,61.7\n                    C468.6,170.8,468.6,304.4,386.5,386.5z\"/>\n                    <path d=\"M342.3,132.9c-5.3-5.3-13.8-5.3-19.1,0l-85.6,85.6L152,132.9c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1\n                    l85.6,85.6l-85.6,85.6c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.6-85.6l85.6,85.6c2.6,2.6,6.1,4,9.5,4\n                    c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.4-85.6l85.6-85.6C347.6,146.7,347.6,138.2,342.3,132.9z\"/>\n                </g> \n            </svg>  \n        </div>\n    )\n  }\n  \n  export default Square","import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport ReactAudioPlayer from 'react-audio-player';\nimport Square from './Square';\nimport './PMappingUI.css'\n\nfunction PMappingUI({ pieceQueue, finishPers, \n    hoverClr, selectedClr, resetColors\n }) {\n    ///////////////\n    // VARIABLES //\n    ///////////////\n    const [curPieceId, setCurPieceId] = useState(0);\n    const [piecePath, setPiecePath] = useState(null);\n    const [rerender, forceRerender] = useState(true)\n\n    const [storedMappings, setMappings] = useState([]); // mapping for each piece\n    const [mapping, setMapping] = useState([]); //[{color, size}]\n    const baseWidth = \"20%\"; // must be a percentage\n    const [warnDisplay, setWarnDisplay] = useState(false);\n\n    const squaresDivRef = useRef()\n\n\n    ///////////\n    // PIECE //\n    ///////////\n    useEffect(()=>{\n        console.log(\"setting current mapping\");\n        setMapping(storedMappings.length <= curPieceId\n            ? []\n            : storedMappings[curPieceId]);\n    },[curPieceId, storedMappings]);\n\n    useEffect(()=>{\n        setPiecePath(\"audio_20s/\" + pieceQueue[curPieceId] + \".m4a\");\n    }, [curPieceId, pieceQueue])\n\n\n    ///////////////////////////\n    // CURRENT PIECE MAPPING //\n    ///////////////////////////\n    function addMapping(){\n        if (mapping.length < 3){\n            setWarnDisplay(false);\n            setMapping(mapping =>{\n                if (mapping.length === 0){\n                    return [{color: selectedClr, size: baseWidth}];\n                } else {\n                    return [...mapping, {color: selectedClr, size: baseWidth}]\n                }\n            });\n        } else{\n            setWarnDisplay(true);\n        }\n    }\n    function removeMapping(id){\n        setWarnDisplay(false);\n        setMapping(mapping =>{\n            if (mapping.length === 1){\n                return [];\n            } else if (id === 0){\n                return mapping.slice(1,);\n            } else if (id === mapping.length-1){\n                return mapping.slice(0,id);\n            } else {\n                return [...mapping.slice(0,id), ...mapping.slice(id+1,)];\n            }\n        });\n    }\n\n    ////////////\n    // SQUARE //\n    ////////////\n    const updateSize = useCallback((id, newSize)=>{\n        // not using setMapping here -> prevent infinite loop (dependency: mapping)\n        // changing elements in mapping doesn't change the array reference \n        mapping[id].size = newSize\n        forceRerender(false)\n        forceRerender(true)\n    },[mapping])\n\n    ////////////\n    // SWITCH //\n    ////////////\n    function goBack(){\n        console.log(\"going back to id:\", curPieceId-1)\n        storeMappings(mapping);\n        setCurPieceId(curPieceId-1);\n        resetUI();\n    }\n    function goNext(){\n        console.log(\"going next to id:\", curPieceId+1)\n        storeMappings(mapping);\n        setCurPieceId(curPieceId+1);\n        resetUI();\n    }\n    function onFinish(){\n        storeMappings(mapping);\n        finishPers();\n        resetUI();\n    }\n    function resetUI(){\n        setWarnDisplay(false);\n        resetColors();\n    }\n\n    //////////////\n    // MAPPINGS //\n    //////////////\n    function storeMappings(curMapping){\n        setMappings(mappings => {\n          let num = mappings.length;\n          if (num===0){\n            return [curMapping];\n          } else if (curPieceId===0){\n            return [curMapping, ...mappings.slice(1,)];\n          } else if (curPieceId===num-1){\n            return [...mappings.slice(0,num-1), curMapping]\n          } else{\n            return [...mappings.slice(0,curPieceId), curMapping, ...mappings.slice(curPieceId+1,)]\n          }\n        });\n      }\n\n    return (\n      <div id='mappingWrapper'>\n        <div id='mappingUI'>\n        <p id='colorQ'> What's the color of this music? </p>\n        <ReactAudioPlayer\n        id='audioPlayer'\n        src={piecePath}\n        autoPlay controls />\n        <div id='selection'>\n            <div id='hoverClr' style={{backgroundColor: hoverClr}}></div>\n            <div id='selectedClr' style={{backgroundColor: selectedClr}}></div>\n        </div>\n        <svg id='add-icon' onClick={addMapping} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\">\n            <g fill='white'>\n                <path d=\"M22,44c-3.309,0-6-2.665-6-5.941V28H5.941C2.665,28,0,25.309,0,22s2.665-6,5.941-6H16V5.941C16,2.665,18.691,0,22,0\n                s6,2.665,6,5.941V16h10.059C41.335,16,44,18.691,44,22s-2.665,6-5.941,6H28v10.059C28,41.335,25.309,44,22,44z M5.941,18\n                C3.805,18,2,19.832,2,22s1.805,4,3.941,4H18v12.059C18,40.195,19.832,42,22,42s4-1.805,4-3.941V26h12.059C40.195,26,42,24.168,42,22\n                s-1.805-4-3.941-4H26V5.941C26,3.805,24.168,2,22,2s-4,1.805-4,3.941V18H5.941z\"/>\n            </g>\n        </svg>\n        </div>\n\n        {curPieceId===0\n        ? <></>\n        : <svg id='back-icon' onClick={goBack} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 477.175 477.175\">\n            <g fill='white'>\n                <path d=\"M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z\"/>\n            </g>\n        </svg>}\n        {curPieceId===pieceQueue.length-1\n        ? <></>\n        :<svg id='next-icon' onClick={goNext} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 477.175 477.175\">\n            <g fill='white'>\n                <path d=\"M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z\"/> \n            </g> \n        </svg>}\n        <p id='selected-colors'\n        style={{display:mapping.length===0?'none':'block'}}>\n             Selected color(s): </p>\n        {/* <p id='pers-ins'\n        style={{display:mapping.length===0?'none':'block'}}>\n             Click to increase a color's weight.<br/> Double click to reduce it. </p> */}\n        <div id='pers-squares' ref={squaresDivRef}>\n            {Object.keys(mapping).map((id) => {\n                let i=parseInt(id);\n                return <Square id={i} key={i} clr={mapping[i].color} \n                    baseWidth={baseWidth} maxWidth={squaresDivRef.current.offsetWidth} size={mapping[i].size} \n                    removeSquare={removeMapping}\n                    updateSize={updateSize} />\n            }\n            )}\n        </div>\n        <p id='max-warning' \n        style={warnDisplay ? {display: \"initial\"} : {display: \"none\"}}>\n             Up to 3 colors! </p>\n\n        <svg id='finish-icon' onClick={onFinish} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\">\n            <g fill='white'>\n                <path d=\"M26,0C11.664,0,0,11.663,0,26s11.664,26,26,26s26-11.663,26-26S40.336,0,26,0z M26,50C12.767,50,2,39.233,2,26S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z\"/>\n\t            <path d=\"M38.252,15.336l-15.369,17.29l-9.259-7.407c-0.43-0.345-1.061-0.274-1.405,0.156c-0.345,0.432-0.275,1.061,0.156,1.406l10,8C22.559,34.928,22.78,35,23,35c0.276,0,0.551-0.114,0.748-0.336l16-18c0.367-0.412,0.33-1.045-0.083-1.411C39.251,14.885,38.62,14.922,38.252,15.336z\"/>            \n            </g> \n        </svg>\n        <svg id='info-icon' vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\">\n            <g fill='#C0D4FF'>\n            <path d=\"M26,0C11.663,0,0,11.663,0,26s11.663,26,26,26s26-11.663,26-26S40.337,0,26,0z M26,50C12.767,50,2,39.233,2,26\n\t\tS12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z\"/>\n            <path d=\"M26,37c-0.553,0-1,0.447-1,1v2c0,0.553,0.447,1,1,1s1-0.447,1-1v-2C27,37.447,26.553,37,26,37z\"/>\n            <path d=\"M26.113,9.001C26.075,9.001,26.037,9,25.998,9c-2.116,0-4.106,0.815-5.615,2.304C18.847,12.819,18,14.842,18,17\n                c0,0.553,0.447,1,1,1s1-0.447,1-1c0-1.618,0.635-3.136,1.787-4.272c1.153-1.137,2.688-1.765,4.299-1.727\n                c3.161,0.044,5.869,2.752,5.913,5.913c0.029,2.084-0.999,4.002-2.751,5.132C26.588,23.762,25,26.794,25,30.158V33\n                c0,0.553,0.447,1,1,1s1-0.447,1-1v-2.842c0-2.642,1.276-5.105,3.332-6.432c2.335-1.506,3.706-4.063,3.667-6.84\n                C33.939,12.599,30.401,9.061,26.113,9.001z\"/>\n        </g> \n        </svg>\n      </div>\n  )\n}\n\nexport default PMappingUI;\n","import React, { useState } from 'react';\nimport './Personalization.css';\n\nimport ClrCanvas from '../Components/ClrCanvas';\nimport PMappingUI from '../Components/PMappingUI';\n\nfunction Personalization({ onPageSwitch }) {\n  const [hoverClr, setHoverClr] = useState('#FFFFFF');\n  const [selectedClr, setSelectedClr] = useState('#FFFFFF');\n  const pieceQueue = [\"Clair_de_Lune\", \"Dragon_Boy\", \"HeartBroken_Kiki\", \"Life_Incredible_Again\", \"Secret_Duo\"];\n\n  function finish(){\n    // add transition page: loading / training progress\n    // backend - storedMappings loading & training\n    console.log(\"to be implemented: page switch\")\n    onPageSwitch({nextPage: 'WORKSPACE'})\n  }\n\n  function updateHoverColor(clr){\n    setHoverClr(clr);\n  }\n  function updateSelectedColor(clr){\n    setSelectedClr(clr);\n  }\n\n  function resetColors(){\n    updateHoverColor('white');\n    updateSelectedColor('white');\n  }\n\n\n  const mappingUIProps = {\n    pieceQueue: pieceQueue,\n    finishPers: finish,\n    hoverClr: hoverClr,\n    selectedClr: selectedClr,\n    resetColors: resetColors,\n  }\n\n  return (\n    <div className='page' id='personalization-page'>\n      <ClrCanvas updateHoverClr={updateHoverColor} \n      updateSelectedClr={updateSelectedColor}/>\n      <PMappingUI {...mappingUIProps}/>\n    </div>\n  )\n}\n\nexport default Personalization;\n","import React, { } from 'react';\n\nfunction Workspace({ onPageSwitch }) {\n\n\n  return (<></>\n  )\n}\n\n\nexport default Workspace;\n","import React, { useCallback, useState } from 'react';\nimport { useToggle } from './hooks/customeHooks';\n// import { CSSTransition } from 'react-transition-group';\n\nimport './App.css';\nimport Personalization from './pages/Personalization';\nimport Workspace from './pages/Workspace'\n\nfunction App() {\n  const [curPage, setCurPage] = useState('PERSONALIZATION');\n  const [nextPage, setNextPage] = useState(null);\n  const [isAnimated, toggleAnimated] = useToggle();\n\n  // page switch\n\n  const startPageSwitch = useCallback((pageSwitchData) => {\n    setNextPage(pageSwitchData.nextPage);\n    toggleAnimated();\n  }, [toggleAnimated])\n\n  function finishPageSwitch() {\n    setCurPage(nextPage);\n    setNextPage(null);\n    toggleAnimated();\n  }\n\n  function renderSwitch(curPage){\n    switch(curPage){\n      case 'PERSONALIZATION':\n        return <Personalization {...pageProps}/>;\n      case 'WORKSPACE':\n        return <Workspace {...pageProps}/>;\n      default:\n        return <></>;\n    }\n  }\n\n  // animation props\n\n  const AnimationProps = {\n    in: isAnimated,\n    timeout: 1000,\n  }\n\n  const fromProps = {\n    ...AnimationProps,\n    classNames: 'from',\n    onEntered: finishPageSwitch\n  }\n\n  const toProps = {\n    ...AnimationProps,\n    classNames: 'to'\n  }\n\n  // page props\n\n  const pageProps = {\n    onPageSwitch: startPageSwitch\n  };\n\n  \n\n  return (\n    <>\n      {renderSwitch(curPage)}\n      {/* <CSSTransition {...fromProps}>\n        {renderSwitch(curPage)}\n      </CSSTransition>\n      <CSSTransition {...toProps}>\n        {renderSwitch(nextPage)}\n      </CSSTransition> */}\n    </>\n  );\n}\n\nexport default App;","import { useReducer, useEffect } from 'react';\n\n// returns [boolean, function() ]\n// function toggles the boolean\nexport function useToggle() {\n    return useReducer(visible => !visible, false);\n}\n\n// adds page title on component mount\nexport function usePageTitleOnMount(title) {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}