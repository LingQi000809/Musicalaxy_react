{"version":3,"sources":["Components/ClrCanvas.js","Components/Square.js","Components/PMappingUI.js","pages/Personalization.js","pages/Workspace.js","App.js","hooks/customeHooks.js","index.js"],"names":["ClrCanvas","updateHoverClr","updateSelectedClr","canvasRef","useRef","imgRef","getMouseClr","e","canvas","current","canvasRect","getBoundingClientRect","x","clientX","left","y","clientY","top","pixel","getContext","getImageData","data","id","ref","onMouseMove","curClr","onClick","alt","src","onload","ctx","img","width","clientWidth","height","clientHeight","console","log","drawImage","style","display","Square","clr","size","removeSquare","increSize","decreSize","squareRef","useState","closeDisplay","setCloseDisplay","useDoubleClick","onSingleClick","onDoubleClick","latency","wrapperStyle","position","marginBottom","squareStyle","backgroundColor","cursor","border","closeStyle","right","showClose","onMouseEnter","onMouseLeave","vxmlns","viewBox","fill","d","PMappingUI","pieceQueue","finish","hoverClr","selectedClr","resetColors","curPieceId","setCurPieceId","piecePath","setPiecePath","storedMappings","setMappings","mapping","setMapping","warnDisplay","setWarnDisplay","removeMapping","length","slice","incrementSquareSize","newMapping","Object","keys","map","i","parseInt","color","unit","decrementSquareSize","resetUI","storeMappings","curMapping","mappings","num","useEffect","autoPlay","controls","Personalization","onPageSwitch","setHoverClr","setSelectedClr","updateHoverColor","updateSelectedColor","mappingUIProps","finishPers","nextPage","className","Workspace","App","curPage","setCurPage","setNextPage","useReducer","visible","isAnimated","toggleAnimated","startPageSwitch","useCallback","pageSwitchData","AnimationProps","in","timeout","pageProps","classNames","onEntered","renderSwitch","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b24314fd.chunk.js","sourcesContent":["import { useEffect, useRef } from 'react';\nimport './ClrCanvas.css';\n\nfunction ClrCanvas({updateHoverClr, updateSelectedClr}) {\n    const canvasRef = useRef(null);\n    const imgRef = useRef(null);\n\n    function handleImgOnload (){\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      const img = imgRef.current;\n      img.width = canvas.clientWidth;\n      img.height = canvas.clientHeight;\n      console.log(\"image onload\");\n      ctx.canvas.width = img.width;\n      ctx.canvas.height = img.height;\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      img.style.display = 'none';\n    }\n\n    // useEffect(()=>{\n    //   const canvas = canvasRef.current;\n    //   const ctx = canvas.getContext(\"2d\");\n    //   const img = imgRef.current;\n    //   img.width = canvas.clientWidth;\n    //   img.height = canvas.clientHeight;\n    // //   BUG: pixels not changed when resized\n    //   img.onload = () =>{\n    //     console.log(\"image onload\");\n    //     ctx.canvas.width = img.width;\n    //     ctx.canvas.height = img.height;\n    //     ctx.drawImage(img, 0, 0, img.width, img.height);\n    //     img.style.display = 'none';\n    //   }\n    // });\n\n    function getMouseClr(e){\n        const canvas = canvasRef.current;\n        let canvasRect = canvas.getBoundingClientRect();\n        let x = e.clientX - canvasRect.left;\n        let y = e.clientY - canvasRect.top;\n        const ctx = canvas.getContext(\"2d\");\n        let pixel = ctx.getImageData(x,y,1,1).data;\n        let curClr = 'rgba(' + pixel[0] + ', ' + pixel[1] + ', ' + pixel[2] + ', ' + pixel[3] / 255 + ')';\n        return curClr;\n    }\n\n    return(\n        <div id='colorPicker'>\n          <canvas id=\"canvas\" ref={canvasRef} \n            onMouseMove={e => {\n                let curClr = getMouseClr(e);\n                updateHoverClr(curClr);\n            }}\n            onClick={e=>{\n                let curClr = getMouseClr(e);\n                updateSelectedClr(curClr);\n            }\n            }/>\n          <img id=\"colorSquare\" ref={imgRef} alt='pick color' src='img/colorSquare.png'\n          onload={handleImgOnload} />\n        </div>\n      )\n  }\n  \n  export default ClrCanvas","import React, {useState, useRef} from 'react';\nimport useDoubleClick from 'use-double-click';\n\nfunction Square({id, clr, size, removeSquare, increSize, decreSize}) {\n    const squareRef = useRef();\n    const [closeDisplay, setCloseDisplay] = useState(false);\n    // const [side, setSideSize] = useState(20 * size + \"%\"); // max size: 5\n\n    useDoubleClick({\n        /** A callback function for single click events */\n        onSingleClick: e => {\n            if (size===5){\n                return; // can't be larger\n            }\n            // setSideSize(20*(size+1)+\"%\");\n            increSize(id);\n        },\n        /** A callback function for double click events */\n        onDoubleClick: e => {\n            if (size===1){\n                return; // can't be smaller\n            }\n            decreSize(id);\n        },\n        /** (Required) Dom node to watch for double clicks */\n        ref: squareRef,\n        /**\n         * The amount of time (in milliseconds) to wait \n         * before differentiating a single from a double click\n         */\n        latency: 200\n      });\n\n    let side = 20 * size + \"%\"; // max size: 5\n    let wrapperStyle = {\n        position: \"relative\",\n        width: side,\n        height: \"30%\",\n        marginBottom: \"2px\"\n    }\n    let squareStyle = {\n        display: \"block\",\n        backgroundColor: clr,\n        width: \"100%\",\n        height: \"100%\",\n        cursor: \"cell\",\n        border: \"0.5px solid black\"\n    }\n    let closeStyle = {\n        display: closeDisplay?\"initial\":\"none\",\n        cursor: \"pointer\",\n        height: \"40%\",\n        position: \"absolute\",\n        top: \"3px\",\n        right: \"3px\"\n        }\n    function deleteMe(){\n        removeSquare(id);\n    }\n    function showClose(){\n        setCloseDisplay(true)\n    }\n    function hideClose(){\n        setCloseDisplay(false)\n    }\n    \n    return(\n        <div id='square-wrapper' style={wrapperStyle}>\n        <div ref={squareRef} style={squareStyle} \n        onMouseEnter={showClose} onMouseLeave={hideClose}>\n        </div>\n        <svg id='close-icon' style={closeStyle} \n        onClick={deleteMe} onMouseEnter={showClose}\n        vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 475.2 475.2\">\n            <g fill='black'>\n                <path d=\"M405.6,69.6C360.7,24.7,301.1,0,237.6,0s-123.1,24.7-168,69.6S0,174.1,0,237.6s24.7,123.1,69.6,168s104.5,69.6,168,69.6\n                s123.1-24.7,168-69.6s69.6-104.5,69.6-168S450.5,114.5,405.6,69.6z M386.5,386.5c-39.8,39.8-92.7,61.7-148.9,61.7\n                s-109.1-21.9-148.9-61.7c-82.1-82.1-82.1-215.7,0-297.8C128.5,48.9,181.4,27,237.6,27s109.1,21.9,148.9,61.7\n                C468.6,170.8,468.6,304.4,386.5,386.5z\"/>\n                <path d=\"M342.3,132.9c-5.3-5.3-13.8-5.3-19.1,0l-85.6,85.6L152,132.9c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1\n                l85.6,85.6l-85.6,85.6c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.6-85.6l85.6,85.6c2.6,2.6,6.1,4,9.5,4\n                c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.4-85.6l85.6-85.6C347.6,146.7,347.6,138.2,342.3,132.9z\"/>\n            </g> \n        </svg>  \n    </div>\n    )\n  }\n  \n  export default Square","import React, { useEffect, useState } from 'react';\nimport ReactAudioPlayer from 'react-audio-player';\nimport Square from './Square';\nimport './PMappingUI.css'\n\nfunction PMappingUI({ pieceQueue, finish, \n    hoverClr, selectedClr, resetColors\n }) {\n    ///////////////\n    // VARIABLES //\n    ///////////////\n    const [curPieceId, setCurPieceId] = useState(0);\n    const [piecePath, setPiecePath] = useState(null);\n\n    const [storedMappings, setMappings] = useState([]); // mapping for each piece\n    const [mapping, setMapping] = useState([]); //[{color, unit(number of clicks/weight)}]\n    \n    const [warnDisplay, setWarnDisplay] = useState(false);\n\n\n    ///////////\n    // PIECE //\n    ///////////\n    useEffect(()=>{\n        console.log(\"setting current mapping\");\n        setMapping(storedMappings.length <= curPieceId\n            ? []\n            : storedMappings[curPieceId]);\n    },[curPieceId, storedMappings]);\n\n    useEffect(()=>{\n        setPiecePath(\"audio/\" + pieceQueue[curPieceId] + \".mp3\");\n    }, [curPieceId, pieceQueue])\n\n\n    ///////////////////////////\n    // CURRENT PIECE MAPPING //\n    ///////////////////////////\n    function updateMapping(){\n        if (mapping.length < 3){\n            setWarnDisplay(false);\n            setMapping(mapping =>{\n                if (mapping.length === 0){\n                    return [{color: selectedClr, unit: 1}];\n                } else {\n                    return [...mapping, {color: selectedClr, unit: 1}]\n                }\n            });\n        } else{\n            setWarnDisplay(true);\n        }\n    }\n    function removeMapping(id){\n        setWarnDisplay(false);\n        setMapping(mapping =>{\n            if (mapping.length === 1){\n                return [];\n            } else if (id === 0){\n                return mapping.slice(1,);\n            } else if (id === mapping.length-1){\n                return mapping.slice(0,id);\n            } else {\n                return [...mapping.slice(0,id), ...mapping.slice(id+1,)];\n            }\n        });\n    }\n\n    ////////////\n    // SQUARE //\n    ////////////\n    function incrementSquareSize(id){\n        let newMapping = Object.keys(mapping).map(i => \n            parseInt(i)===id\n            ? {color: mapping[i].color, unit: mapping[i].unit+1} \n            : mapping[i]);\n        setMapping(newMapping);\n    }\n    function decrementSquareSize(id){\n        let newMapping = Object.keys(mapping).map(i => \n            parseInt(i)===id\n            ? {color: mapping[i].color, unit: mapping[i].unit-1} \n            : mapping[i]);\n        setMapping(newMapping);\n    }\n\n    ////////////\n    // SWITCH //\n    ////////////\n    function goBack(){\n        console.log(\"going back to id:\", curPieceId-1)\n        // setMapping(storedMappings[curPieceId-1]);\n        storeMappings(mapping);\n        setCurPieceId(curPieceId-1);\n        resetUI();\n    }\n    function goNext(){\n        console.log(\"going next to id:\", curPieceId+1)\n        // setMapping(storedMappings.length === curPieceId+1\n        //     ? []\n        //     : storedMappings[curPieceId+1]);\n        storeMappings(mapping);\n        setCurPieceId(curPieceId+1);\n        resetUI();\n    }\n    function onFinish(){\n        storeMappings(mapping);\n        finish(mapping);\n        resetUI();\n    }\n    function resetUI(){\n        setWarnDisplay(false);\n        resetColors();\n    }\n\n    //////////////\n    // MAPPINGS //\n    //////////////\n    function storeMappings(curMapping){\n        setMappings(mappings => {\n          let num = mappings.length;\n          if (num===0){\n            return [curMapping];\n          } else if (curPieceId===0){\n            return [curMapping, ...mappings.slice(1,)];\n          } else if (curPieceId===num-1){\n            return [...mappings.slice(0,num-1), curMapping]\n          } else{\n            return [...mappings.slice(0,curPieceId), curMapping, ...mappings.slice(curPieceId+1,)]\n          }\n        });\n      }\n\n    return (\n      <div id='mappingWrapper'>\n        <div id='mappingUI'>\n        <p id='colorQ'> What's the color of this music? </p>\n        <ReactAudioPlayer\n        id='audioPlayer'\n        src={piecePath}\n        autoPlay controls />\n        <div id='selection'>\n            <div id='hoverClr' style={{backgroundColor: hoverClr}}></div>\n            <div id='selectedClr' style={{backgroundColor: selectedClr}}></div>\n        </div>\n        <svg id='add-icon' onClick={updateMapping} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\">\n            <g fill='white'>\n                <path d=\"M22,44c-3.309,0-6-2.665-6-5.941V28H5.941C2.665,28,0,25.309,0,22s2.665-6,5.941-6H16V5.941C16,2.665,18.691,0,22,0\n                s6,2.665,6,5.941V16h10.059C41.335,16,44,18.691,44,22s-2.665,6-5.941,6H28v10.059C28,41.335,25.309,44,22,44z M5.941,18\n                C3.805,18,2,19.832,2,22s1.805,4,3.941,4H18v12.059C18,40.195,19.832,42,22,42s4-1.805,4-3.941V26h12.059C40.195,26,42,24.168,42,22\n                s-1.805-4-3.941-4H26V5.941C26,3.805,24.168,2,22,2s-4,1.805-4,3.941V18H5.941z\"/>\n            </g>\n        </svg>\n        </div>\n\n        {curPieceId===0\n        ? <></>\n        : <svg id='back-icon' onClick={goBack} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 477.175 477.175\">\n            <g fill='white'>\n                <path d=\"M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z\"/>\n            </g>\n        </svg>}\n        {curPieceId===pieceQueue.length-1\n        ? <></>\n        :<svg id='next-icon' onClick={goNext} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 477.175 477.175\">\n            <g fill='white'>\n                <path d=\"M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z\"/> \n            </g> \n        </svg>}\n        <p id='selected-colors'\n        style={{display:mapping.length===0?'none':'block'}}>\n             Selected color(s): </p>\n        <p id='pers-ins'\n        style={{display:mapping.length===0?'none':'block'}}>\n             Click to increase a color's weight.<br/> Double click to reduce. </p>\n        <div id='pers-squares'>\n            {Object.keys(mapping).map((id) => {\n                let i=parseInt(id);\n                return <Square id={i} key={i}\n                clr={mapping[i].color} size={mapping[i].unit} \n                removeSquare={removeMapping}\n                increSize={incrementSquareSize}\n                decreSize={decrementSquareSize} />\n            }\n            )}\n        </div>\n        <p id='max-warning' \n        style={warnDisplay ? {display: \"initial\"} : {display: \"none\"}}>\n             Up to 3 colors! Hover on the selected ones to see delete option. </p>\n\n        <svg id='finish-icon' onClick={onFinish} vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\">\n            <g fill='white'>\n                <path d=\"M26,0C11.664,0,0,11.663,0,26s11.664,26,26,26s26-11.663,26-26S40.336,0,26,0z M26,50C12.767,50,2,39.233,2,26S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z\"/>\n\t            <path d=\"M38.252,15.336l-15.369,17.29l-9.259-7.407c-0.43-0.345-1.061-0.274-1.405,0.156c-0.345,0.432-0.275,1.061,0.156,1.406l10,8C22.559,34.928,22.78,35,23,35c0.276,0,0.551-0.114,0.748-0.336l16-18c0.367-0.412,0.33-1.045-0.083-1.411C39.251,14.885,38.62,14.922,38.252,15.336z\"/>            \n            </g> \n        </svg>\n        <svg id='info-icon' vxmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\">\n            <g fill='#C0D4FF'>\n            <path d=\"M26,0C11.663,0,0,11.663,0,26s11.663,26,26,26s26-11.663,26-26S40.337,0,26,0z M26,50C12.767,50,2,39.233,2,26\n\t\tS12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z\"/>\n            <path d=\"M26,37c-0.553,0-1,0.447-1,1v2c0,0.553,0.447,1,1,1s1-0.447,1-1v-2C27,37.447,26.553,37,26,37z\"/>\n            <path d=\"M26.113,9.001C26.075,9.001,26.037,9,25.998,9c-2.116,0-4.106,0.815-5.615,2.304C18.847,12.819,18,14.842,18,17\n                c0,0.553,0.447,1,1,1s1-0.447,1-1c0-1.618,0.635-3.136,1.787-4.272c1.153-1.137,2.688-1.765,4.299-1.727\n                c3.161,0.044,5.869,2.752,5.913,5.913c0.029,2.084-0.999,4.002-2.751,5.132C26.588,23.762,25,26.794,25,30.158V33\n                c0,0.553,0.447,1,1,1s1-0.447,1-1v-2.842c0-2.642,1.276-5.105,3.332-6.432c2.335-1.506,3.706-4.063,3.667-6.84\n                C33.939,12.599,30.401,9.061,26.113,9.001z\"/>\n        </g> \n        </svg>\n      </div>\n  )\n}\n\nexport default PMappingUI;\n","import React, { useState } from 'react';\nimport './Personalization.css';\n\nimport ClrCanvas from '../Components/ClrCanvas';\nimport PMappingUI from '../Components/PMappingUI';\n\nfunction Personalization({ onPageSwitch }) {\n  const [hoverClr, setHoverClr] = useState('#FFFFFF');\n  const [selectedClr, setSelectedClr] = useState('#FFFFFF');\n  const pieceQueue = [\"Clair_de_Lune\", \"Dragon_Boy\", \"HeartBroken_Kiki\", \"Life_Incredible_Again\", \"Secret_Duo\"];\n\n  function finish(){\n    // add transition page: loading / training progress\n    // backend - storedMappings loading & training\n    onPageSwitch({nextPage: 'WORKSPACE'})\n  }\n\n  function updateHoverColor(clr){\n    setHoverClr(clr);\n  }\n  function updateSelectedColor(clr){\n    setSelectedClr(clr);\n  }\n\n  function resetColors(){\n    updateHoverColor('white');\n    updateSelectedColor('white');\n  }\n\n\n  const mappingUIProps = {\n    pieceQueue: pieceQueue,\n    finishPers: finish,\n    hoverClr: hoverClr,\n    selectedClr: selectedClr,\n    resetColors: resetColors,\n  }\n\n  return (\n    <div className='page' id='personalization-page'>\n      <ClrCanvas updateHoverClr={updateHoverColor} \n      updateSelectedClr={updateSelectedColor}/>\n      <PMappingUI {...mappingUIProps}/>\n    </div>\n  )\n}\n\nexport default Personalization;\n","import React, { } from 'react';\n\nfunction Workspace({ onPageSwitch }) {\n\n\n  return (<></>\n  )\n}\n\n\nexport default Workspace;\n","import React, { useCallback, useState } from 'react';\nimport { useToggle } from './hooks/customeHooks';\n// import { CSSTransition } from 'react-transition-group';\n\nimport './App.css';\nimport Personalization from './pages/Personalization';\nimport Workspace from './pages/Workspace'\n\nfunction App() {\n  const [curPage, setCurPage] = useState('PERSONALIZATION');\n  const [nextPage, setNextPage] = useState(null);\n  const [isAnimated, toggleAnimated] = useToggle();\n\n  // page switch\n\n  const startPageSwitch = useCallback((pageSwitchData) => {\n    setNextPage(pageSwitchData.nextPage);\n    toggleAnimated();\n  }, [toggleAnimated])\n\n  function finishPageSwitch() {\n    setCurPage(nextPage);\n    setNextPage(null);\n    toggleAnimated();\n  }\n\n  function renderSwitch(curPage){\n    switch(curPage){\n      case 'PERSONALIZATION':\n        return <Personalization {...pageProps}/>;\n      case 'WORKSPACE':\n        return <Workspace {...pageProps}/>;\n      default:\n        return <></>;\n    }\n  }\n\n  // animation props\n\n  const AnimationProps = {\n    in: isAnimated,\n    timeout: 1000,\n  }\n\n  const fromProps = {\n    ...AnimationProps,\n    classNames: 'from',\n    onEntered: finishPageSwitch\n  }\n\n  const toProps = {\n    ...AnimationProps,\n    classNames: 'to'\n  }\n\n  // page props\n\n  const pageProps = {\n    onPageSwitch: startPageSwitch\n  };\n\n  \n\n  return (\n    <>\n      {renderSwitch(curPage)}\n      {/* <CSSTransition {...fromProps}>\n        {renderSwitch(curPage)}\n      </CSSTransition>\n      <CSSTransition {...toProps}>\n        {renderSwitch(nextPage)}\n      </CSSTransition> */}\n    </>\n  );\n}\n\nexport default App;","import { useReducer, useEffect } from 'react';\n\n// returns [boolean, function() ]\n// function toggles the boolean\nexport function useToggle() {\n    return useReducer(visible => !visible, false);\n}\n\n// adds page title on component mount\nexport function usePageTitleOnMount(title) {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}